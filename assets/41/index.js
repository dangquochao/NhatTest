window.__require=function t(e,o,n){function r(a,s){if(!o[a]){if(!e[a]){var c=a.split("/");if(c=c[c.length-1],!e[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(i)return i(c,!0);throw new Error("Cannot find module '"+a+"'")}a=c}var p=o[a]={exports:{}};e[a][0].call(p.exports,function(t){return r(e[a][1][t]||t)},p,p.exports,t,e,o,n)}return o[a].exports}for(var i="function"==typeof __require&&__require,a=0;a<n.length;a++)r(n[a]);return r}({"Baccarat.Assets":[function(t,e,o){"use strict";cc._RF.push(e,"c3929B7DJJFJ56uustrPN2z","Baccarat.Assets");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.chipBetTemp=null,e.chipBetSprites=[],e.listBetValue=[1,5,10,50,100,500,1e3,2e3,5e3,1e4,5e4,1e5,15e4,2e5],e.chipBetPool=null,e}return r(e,t),e.prototype.onLoad=function(){this.chipBetPool=new cc.NodePool("chipbet")},e.prototype.start=function(){},e.prototype.getChipBet=function(t){var e=null;return 0==this.chipBetPool.size()&&this.chipBetPool.put(cc.instantiate(this.chipBetTemp)),(e=this.chipBetPool.get()).active=!0,e.getComponent(cc.Sprite).spriteFrame=this.chipBetSprites[this.listBetValue.indexOf(t/1e3)],e},i([c(cc.Node)],e.prototype,"chipBetTemp",void 0),i([c([cc.SpriteFrame])],e.prototype,"chipBetSprites",void 0),i([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],"Baccarat.ButtonBet":[function(t,e,o){"use strict";cc._RF.push(e,"931e1pN48lEV4zRZ4h/Z0lo","Baccarat.ButtonBet");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scrBtn=null,e.btnX2=null,e.btnRebet=null,e.btnBetB=null,e.currbetBtnBet=null,e.chipBorder=null,e.listBetValue=[1,5,10,50,100,500,1e3,2e3,5e3,1e4,5e4,15e4,2e5],e}return r(e,t),e.prototype.start=function(){var t=this;this.scrBtn.content.children.forEach(function(e,o){var n=new cc.Component.EventHandler;n.target=t.node,n.component="Baccarat.ButtonBet",n.handler="onClickBet",n.customEventData=t.listBetValue[o]+"",e.getComponent(cc.Button).clickEvents.push(n)}),this.currbetBtnBet.y=10},e.prototype.onClickBet=function(t,e){cc.log("clickbet:"+e),cc.tween(this.currbetBtnBet).to(.1,{y:0}).start(),this.currbetBtnBet=t.target,this.chipBorder.parent=this.currbetBtnBet,cc.tween(this.currbetBtnBet).to(.1,{y:10}).start()},e.prototype.onClickX2=function(){},e.prototype.onClickRebet=function(){},e.prototype.onChangeListChip=function(t,e){var o=this.scrBtn.getScrollOffset(),n=this.scrBtn.getMaxScrollOffset();cc.log("currentOffset = "+this.scrBtn.getScrollOffset()),"previous"==e?o.x<0&&cc.tween(this.scrBtn.content).to(.3,{x:this.scrBtn.content.x+100}).start():Math.abs(o.x)<n.x&&cc.tween(this.scrBtn.content).to(.3,{x:this.scrBtn.content.x-100}).start()},i([c(cc.ScrollView)],e.prototype,"scrBtn",void 0),i([c(cc.Button)],e.prototype,"btnX2",void 0),i([c(cc.Button)],e.prototype,"btnRebet",void 0),i([c(cc.Button)],e.prototype,"btnBetB",void 0),i([c(cc.Node)],e.prototype,"currbetBtnBet",void 0),i([c(cc.Node)],e.prototype,"chipBorder",void 0),i([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],"Baccarat.Player":[function(t,e,o){"use strict";cc._RF.push(e,"ad580J02flDJ5w8uubVmJFs","Baccarat.Player");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},a=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{c(n.next(t))}catch(e){i(e)}}function s(t){try{c(n.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,s)}c((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../../Scritps/DefineTs/PathResource"),l=t("../../../Scritps/Obs/LbMoneyChange"),p=t("../../../Scritps/Windown"),u=cc._decorator,h=u.ccclass,f=u.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lbNickName=null,e.lbChips=null,e.avatar=null,e.dynamicIndex=0,e.nickname="Player",e.currentChips=0,e.id=0,e}return r(e,t),e.prototype.start=function(){},e.prototype.setInfo=function(t,e,o,n){this.setName(e),this.setId(t),this.setChip(o),this.setAvatar(n)},e.prototype.setName=function(t){this.lbNickName.string=t,this.nickname=t,t.length>10&&(this.lbNickName.string=t.slice(0,7)+"...")},e.prototype.setChip=function(t,e){void 0===e&&(e=!0),this.lbChips.setMoney(t,e),this.currentChips=t},e.prototype.setAvatar=function(t){return a(this,void 0,void 0,function(){var e,o;return s(this,function(n){switch(n.label){case 0:return e=c.PathResource.Avatar.replace("%d",t.toString()),[4,p.Windown.getSpFrameRes(e)];case 1:return o=n.sent(),this.avatar.spriteFrame=o,[2]}})})},e.prototype.setId=function(t){this.id=t},i([f(cc.Label)],e.prototype,"lbNickName",void 0),i([f(l.default)],e.prototype,"lbChips",void 0),i([f(cc.Sprite)],e.prototype,"avatar",void 0),i([h],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../../../Scritps/DefineTs/PathResource":void 0,"../../../Scritps/Obs/LbMoneyChange":void 0,"../../../Scritps/Windown":void 0}],BaccaratController:[function(t,e,o){"use strict";cc._RF.push(e,"d65e4chFb9JX5TYXArxHQ4s","BaccaratController");var n=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{c(n.next(t))}catch(e){i(e)}}function s(t){try{c(n.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,s)}c((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../../../Scritps/DefineTs/EVENT_MANAGER"),a=t("../../../Scritps/DefineTs/REQUEST_CODE"),s=t("../../../Scritps/DefineTs/TextDefine"),c=t("../../../Scritps/Game/GAME_TYPE"),l=t("../../../Scritps/Network/ConectManager"),p=t("../../../Scritps/Windown"),u=function(){function t(){this.sfs=null,this.roomSFS=null,this.listTimeOut=[],this.objFinish=null,this.gameType=0,this.joinRoomData=null,this.infoRoom=null,this.sfs=l.ConectManager.getIns().sfs,this.sfs.addEventListener(SFS2X.SFSEvent.USER_EXIT_ROOM,this.userExitRoom,this),this.sfs.addEventListener(SFS2X.SFSEvent.ROOM_CREATION_ERROR,this.onCreateError,this),this.sfs.addEventListener(SFS2X.SFSEvent.ROOM_JOIN,this.onJoinRoom,this),this.sfs.addEventListener(SFS2X.SFSEvent.ROOM_JOIN_ERROR,this.onJoinRoomErr,this),this.sfs.addEventListener(SFS2X.SFSEvent.EXTENSION_RESPONSE,this.extResponse,this),p.Windown.BaccaratController=this,cc.systemEvent.on(i.EVENT_MANAGER.onDisconnect,this.onDisconnect,this)}return t.prototype.onDisconnect=function(){this.clear(),this.baccaratView.node.destroy()},t.prototype.clear=function(){cc.systemEvent.targetOff(this),this.sfs.removeEventListener(SFS2X.SFSEvent.USER_EXIT_ROOM,this.userExitRoom),this.sfs.removeEventListener(SFS2X.SFSEvent.ROOM_JOIN,this.onJoinRoom),this.sfs.removeEventListener(SFS2X.SFSEvent.ROOM_JOIN_ERROR,this.onJoinRoomErr),this.sfs.removeEventListener(SFS2X.SFSEvent.EXTENSION_RESPONSE,this.extResponse),this.objFinish&&(this.objFinish.get("agWin"),p.Windown.MoneyUser.removeDelay(this.gameType)),p.Windown.MoneyUser.endGameMOney(this.gameType)},t.prototype.userExitRoom=function(t){if("Baccarat"==t.room.groupId&&t.user.isItMe)return this.onDestroy(),void cc.director.loadScene("main")},t.prototype.onCreateError=function(){cc.log("creat err"),p.Windown.UIManager.hideLoading(),this.onDestroy(),p.Windown.Dialog.showLog(s.TextDefine.ERR_JOIN_ROOM)},t.prototype.onDestroy=function(){p.Windown.UIManager.hideLoadingData(),p.Windown.UIManager.hideLoading(),cc.systemEvent.removeAll(this),this.clearAllTimeOut(),this.sfs.removeEventListener(SFS2X.SFSEvent.USER_EXIT_ROOM,this.userExitRoom),this.sfs.removeEventListener(SFS2X.SFSEvent.ROOM_CREATION_ERROR,this.onCreateError),this.sfs.removeEventListener(SFS2X.SFSEvent.ROOM_JOIN,this.onJoinRoom),this.sfs.removeEventListener(SFS2X.SFSEvent.ROOM_JOIN_ERROR,this.onJoinRoomErr),this.sfs.removeEventListener(SFS2X.SFSEvent.EXTENSION_RESPONSE,this.extResponse),p.Windown.BaccaratController=null,this.roomSFS=null,p.Windown.MoneyUser.targetOff(this),p.Windown.MoneyUser.endGameMOney(c.default.Baccarat)},t.prototype.clearAllTimeOut=function(){this.listTimeOut.forEach(function(t){clearTimeout(t)})},t.prototype.onJoinRoom=function(t){return n(this,void 0,void 0,function(){return r(this,function(){return t.room,p.Windown.UIManager.hideLoadingData(),[2]})})},t.prototype.onJoinRoomErr=function(){p.Windown.UIManager.hideLoading(),p.Windown.Dialog.showLog(s.TextDefine.ERR_JOIN_ROOM),this.onDestroy()},t.prototype.extResponse=function(t){var e=t.cmd,o=t.params;switch(cc.log("Baccarat Code:"+e+"\n"+p.Windown.SFSObjToJson(o)),e){case a.REQUEST_CODE.BCRPlayerInfo:this.baccaratView.handlePlayerInfo(o);break;case a.REQUEST_CODE.BCRInfoRoom:this.baccaratView.handleRoomInfo(o)}},t.prototype.sendJoinRoom=function(){var t=this;p.Windown.UIManager.showLoading();var e=this.sfs.roomManager.getRoomListFromGroup("Baccarat").find(function(t){return cc.log("value"+t.getVariable("cj").value),t.containsVariable("cj")&&t.getVariable("cj").value});e?(this.roomSFS=e,e.isJoined?this.sendGetInfoRoom():(cc.log("nhay vao send join rom: "+e),this.sfs.send(new SFS2X.JoinRoomRequest(e,null,-1)))):setTimeout(function(){t.sendJoinRoom()},3e3)},t.prototype.sendGetInfoRoom=function(){this.sendRequest(a.REQUEST_CODE.TXinfoRoom,l.ConectManager.getIns().getSFSObj())},t.prototype.sendRequest=function(t,e){l.ConectManager.getIns().sendRequest(t,e,this.roomSFS)},t.prototype.intiGame=function(){return n(this,void 0,void 0,function(){var t;return r(this,function(e){switch(e.label){case 0:return[4,p.Windown.loadBundle(c.default.Baccarat.toString())];case 1:return t=e.sent(),p.Windown.UIManager.showLoadingData(),t.preloadScene("Baccarat",{},function(t,e){p.Windown.UIManager.setPerData(t/e)},function(e){e?p.Windown.Dialog.showLog(s.TextDefine.Error):t.loadScene("Baccarat",function(t,e){if(t)return p.Windown.Dialog.showLog(s.TextDefine.Error),void p.Windown.UIManager.hideLoadingData();cc.director.runScene(e,null,function(){p.Windown.UIManager.hideLoadingData()})})}),[2]}})})},t}();o.default=u,cc._RF.pop()},{"../../../Scritps/DefineTs/EVENT_MANAGER":void 0,"../../../Scritps/DefineTs/REQUEST_CODE":void 0,"../../../Scritps/DefineTs/TextDefine":void 0,"../../../Scritps/Game/GAME_TYPE":void 0,"../../../Scritps/Network/ConectManager":void 0,"../../../Scritps/Windown":void 0}],BaccaratView:[function(t,e,o){"use strict";cc._RF.push(e,"91133cyz0FNj4WIQhDdRhjP","BaccaratView");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Scritps/Obs/LbMoneyChange"),s=t("../../../Scritps/Windown"),c=t("./Baccarat.Assets"),l=t("./Baccarat.Player"),p=cc._decorator,u=p.ccclass,h=p.property,f=cc.Enum({PLAYER:1,TIE:2,BANKER:3,PLAYER_PAIR:4,BANKER_PAIR:5}),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.players=[],e.thisPlayer=null,e.assets=null,e.nodeGroupUser=null,e.nodeGateBet=[],e.lbOtherPlayer=null,e.lbTimer=null,e.lbSession=null,e.sprTimer=null,e.lbTotalBetB=null,e.lbTotalBetP=null,e.lbTotalBetT=null,e.lbTotalBetBP=null,e.lbTotalBetPP=null,e.listPosChipOnTable=[],e.currentTimer=60,e.totalBetB=0,e.totalBetP=0,e.totalBetBP=0,e.totalBetPP=0,e.totalBetT=0,e.listTotalBetValue=null,e.listDataPlayerOther=[],e.listLbTotalBet=[],e.listValueChip=[.1,1,5,10,50,100,500,1e3,2e3,5e3,1e4,5e4,1e5,15e4,2e5],e}return r(e,t),e.prototype.onLoad=function(){for(var t=0,e=this.listValueChip.length;t<e;t++)this.listValueChip[t]*=1e3;this.getListChipValue(35524400),this.listTotalBetValue=[this.totalBetP,this.totalBetT,this.totalBetB,this.totalBetPP,this.totalBetBP],this.listLbTotalBet=[this.lbTotalBetP,this.lbTotalBetT,this.lbTotalBetB,this.lbTotalBetPP,this.lbTotalBetBP],s.Windown.BaccaratController.baccaratView=this,null!=s.Windown.BaccaratController.joinRoomData&&(this.handlePlayerInfo(s.Windown.BaccaratController.joinRoomData),s.Windown.BaccaratController.joinRoomData=null),null!=s.Windown.BaccaratController.infoRoom&&(this.handleRoomInfo(s.Windown.BaccaratController.infoRoom),s.Windown.BaccaratController.infoRoom=null),s.Windown.BaccaratController.sendJoinRoom()},e.prototype.start=function(){s.Windown.UIManager.hideLoading()},e.prototype.handlePlayerInfo=function(t){this.listDataPlayerOther=[];var e=JSON.parse(s.Windown.SFSArrToJson(t.get("data"))),o=e.find(function(t){return t.id==s.Windown.User.userId});null!=o&&(e.remove(o),cc.log("Co this player trong listPlayer, xoa no di")),7==e.length&&(this.listDataPlayerOther.push(e.pop()),cc.log("Co 7 player trong listPlayer, xoa 1 thang  di:"+e.length));for(var n=0,r=e.length;n<r;n++){var i=e[n],a=this.players[n];cc.isValid(a)&&(cc.log("player:",a),a.node.active=!0,a.setInfo(i.id,i.nn,i.ag,i.iv))}this.lbOtherPlayer.string=t.getInt("so")+this.listDataPlayerOther.length+"",this.thisPlayer.setName(s.Windown.User.nickName),this.thisPlayer.setChip(s.Windown.User.userAg,!1),cc.log("handlePlayerInfoo:listDataPlayerOther size="+this.listDataPlayerOther.length)},e.prototype.handleRoomInfo=function(t){this.currentTimer=t.getInt("time"),this.sprTimer.fillRange=this.currentTimer/30,this.onCountTimeRemain();var e=JSON.parse(s.Windown.SFSArrToJson(t.get("cur")));this.lbSession.string="#"+t.getInt("sision");for(var o=0;o<e.length;o++){for(var n=e[o],r=n.id,i=n.b,a=0;a<i.length;a++)for(var c=i[a].bet,l=this.getListChipValue(c),p=0,u=l.length;p<u;p++){var h=this.assets.getChipBet(l[p]);h.parent=this.nodeGateBet[r-1];var d=r>3?20:50,y=s.Windown.RandomNumber(this.listPosChipOnTable[r-1].x-d,this.listPosChipOnTable[r-1].x+d),v=s.Windown.RandomNumber(this.listPosChipOnTable[r-1].y-d,this.listPosChipOnTable[r-1].y+d);h.setPosition(cc.v2(y,v))}switch(r){case f.BANKER:this.totalBetB=n.t;break;case f.PLAYER:this.totalBetP=n.t;break;case f.BANKER_PAIR:this.totalBetBP=n.t;break;case f.PLAYER_PAIR:this.totalBetPP=n.t;break;case f.TIE:this.totalBetT=n.t}this.lbTotalBetB.setMoney(this.totalBetB),this.lbTotalBetP.setMoney(this.totalBetP),this.lbTotalBetBP.setMoney(this.totalBetBP),this.lbTotalBetPP.setMoney(this.totalBetPP),this.lbTotalBetT.setMoney(this.totalBetT)}},e.prototype.handleStartGame=function(t){this.lbSession.string="#"+t.getInt("sision"),this.currentTimer=t.getInt("time"),this.lbTimer.string=this.currentTimer+"",this.sprTimer.fillRange=1,this.onCountTimeRemain()},e.prototype.handlePlayerBet=function(t){var e=t.getInt("pid"),o=t.getInt("id");cc.log("handlePlayerBet PlayerID:",e+"--gateBet:"+o);var n,r=t.getLong("bet"),i=this.assets.getChipBet(r),a=this.nodeGateBet[o-1],c=this.getPlayerWithId(e);n=null!=c?a.convertToNodeSpaceAR(c.node.parent.convertToWorldSpaceAR(c.node.position)):a.convertToNodeSpaceAR(this.nodeGroupUser.parent.convertToWorldSpaceAR(this.nodeGroupUser.position)),i.parent=a,i.setPosition(n);var l=o>3?20:40,p=s.Windown.RandomNumber(this.listPosChipOnTable[o-1].x-l,this.listPosChipOnTable[o-1].x+l),u=s.Windown.RandomNumber(this.listPosChipOnTable[o-1].y-l,this.listPosChipOnTable[o-1].y+l),h=cc.v2(p,u);cc.tween(i).set({position:n}).to(.3,{x:h.x,y:h.y},{easing:cc.easing.sineIn}).start(),this.listTotalBetValue[o-1]+=r,cc.log("listTotalBetValue:",this.listTotalBetValue),cc.log("listLbTotalBet=="+typeof this.listLbTotalBet[o-1])},e.prototype.onCountTimeRemain=function(){var t=this;this.schedule(function(){t.currentTimer>0?(t.lbTimer.string=t.currentTimer+"",t.currentTimer--,cc.tween(t.sprTimer).to(1,{fillRange:t.currentTimer/30}).start()):t.lbTimer.string="0"},1,this.currentTimer)},e.prototype.getPlayerWithId=function(t){return t==s.Windown.User.userId?this.thisPlayer:this.players.find(function(e){return e.id==t})},e.prototype.getListChipValue=function(t){var e=[];return this.getNameChip(t,e),e},e.prototype.getNameChip=function(t,e){for(var o,n,r=0,i=0;i<this.listValueChip.length;i++)if(this.listValueChip[i]>t){r=this.listValueChip[i-1];break}if(0==r)for(i=this.listValueChip.length-1;i>=0;i++)if(t>=this.listValueChip[i]){r=this.listValueChip[i];break}if(o=Math.floor(t/r),t=n=t%r,r>=1e3)for(i=0;i<o;i++)e.push(r);n>0&&this.getNameChip(t,e)},i([h([l.default])],e.prototype,"players",void 0),i([h(l.default)],e.prototype,"thisPlayer",void 0),i([h(c.default)],e.prototype,"assets",void 0),i([h(cc.Node)],e.prototype,"nodeGroupUser",void 0),i([h([cc.Node])],e.prototype,"nodeGateBet",void 0),i([h(cc.Label)],e.prototype,"lbOtherPlayer",void 0),i([h(cc.Label)],e.prototype,"lbTimer",void 0),i([h(cc.Label)],e.prototype,"lbSession",void 0),i([h(cc.Sprite)],e.prototype,"sprTimer",void 0),i([h(a.default)],e.prototype,"lbTotalBetB",void 0),i([h(a.default)],e.prototype,"lbTotalBetP",void 0),i([h(a.default)],e.prototype,"lbTotalBetT",void 0),i([h(a.default)],e.prototype,"lbTotalBetBP",void 0),i([h(a.default)],e.prototype,"lbTotalBetPP",void 0),i([h([cc.Vec2])],e.prototype,"listPosChipOnTable",void 0),i([u],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../../../Scritps/Obs/LbMoneyChange":void 0,"../../../Scritps/Windown":void 0,"./Baccarat.Assets":"Baccarat.Assets","./Baccarat.Player":"Baccarat.Player"}]},{},["Baccarat.Assets","Baccarat.ButtonBet","Baccarat.Player","BaccaratController","BaccaratView"]);